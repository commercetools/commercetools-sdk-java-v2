<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (16) -->
<title>Logging (commercetools-java-sdks 14.2.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.commercetools.docs.meta, class: Logging">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.commercetools.docs.meta</a></div>
<h1 title="Class Logging" class="title">Class Logging</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.commercetools.docs.meta.Logging</div>
</div>
<section class="description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name"><a href="../../../../src-html/com/commercetools/docs/meta/Logging.html#line.144">Logging</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block"><b>Table of content</b><ul><li><a href="#logging">Logging</a></li><li><a href="#logger-configuration">Logger configuration</a></li><li><a href="#log-information">Log Information</a></li><ul><li>Error</li><li>Info</li><li>Debug</li><li>Trace</li><li><a href="#logger-hierarchy">Logger hierarchy</a></li></ul><li><a href="#mdc_usage">Usage of Mapped Diagnostic Context</a></li></ul>
 <h2 id=logging>Logging</h2>

 <p>Internal logging used by the commercetools Composable Commerce client itself. Uses slf4j logger named <code>commercetools</code>.</p>

 <h2 id=logger-configuration>Logger configuration</h2>

 <p>The <a href="../../../../io/vrap/rmf/base/client/ClientBuilder.html" title="class in io.vrap.rmf.base.client"><code>ClientBuilder</code></a> allows the customization of the log levels used for different events. By default responses
 will be logged with <code>Level.INFO</code> and errors with <code>Level.ERROR</code>. The
 <a href="../../../../io/vrap/rmf/base/client/ClientBuilder.html#withInternalLoggerFactory(io.vrap.rmf.base.client.http.InternalLoggerFactory,org.slf4j.event.Level,org.slf4j.event.Level,org.slf4j.event.Level,java.util.Map)"><code>ClientBuilder.withInternalLoggerFactory(InternalLoggerFactory, Level, Level, Level, Map)</code></a> method can be used
 to change these defaults. Please see also <a href="../../../../io/vrap/rmf/base/client/http/InternalLoggerMiddleware.html" title="interface in io.vrap.rmf.base.client.http"><code>InternalLoggerMiddleware</code></a> for further details</p>

 <div id="example-ExamplesTest-loggingConfiguration%s" class=code-example><pre><code class='java'>ApiRootBuilder.of()
        .defaultClient(ServiceRegion.GCP_EUROPE_WEST1.getApiUrl())
        .withInternalLoggerFactory(ApiInternalLoggerFactory::get, Level.INFO, // log level for API responses
            Level.INFO, // log level deprecation notices
            Level.ERROR, // default log level for exceptions
            Collections.singletonMap(ConcurrentModificationException.class, Level.DEBUG) // custom log level for specific exceptions
        )
        // ...
        .build();
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/internal-docs/src/test/java/example/ExamplesTest.java" target="_blank">test code</a>.</pre></div>

 <h2 id=log-information>Log Information</h2>

 The default logger middleware logs following information per level:

 <h3>Error</h3>

 In case of an <a href="../../../../io/vrap/rmf/base/client/ApiHttpException.html" title="class in io.vrap.rmf.base.client"><code>ApiHttpException</code></a> the requests HTTP method name, URI and response status code
 will be logged. For any other exception happening the cause and the exception will be logged.

 <h3>Info</h3>

 <p>By default any response by the API will be logged with the requests HTTP method name, URI and response status code.
 In case a deprecation header was submitted in the response an info entry with the deprecation notice will be logged.</p>

 <p>The used log level for these events can be configured while instantiating the InternalLoggerMiddleware.</p>

 <h3>Debug</h3>

 <p>The request and the response object will be logged as a string representation including headers and body. Sensitive
 data like auth token and passwords will be redacted.</p>

 <h3>Trace</h3>

 </p>The request and response will be logged with a pretty printed output.  Sensitive data like auth token and passwords
 will be redacted.</p>

 <h2 id=logger-hierarchy>Logger hierarchy</h2>

 <p>The loggers form a hierarchy separated by a dot. The root logger is <code>commercetools</code>.</p>

 <p>The child loggers of commercetools Composable Commerce correspond with the names of the API endpoints, so for example <code>commercetools.categories</code> for Categories and <code>commercetools.product-types</code> for Product Types.</p>

 <p>The grandchild loggers refer to actions. For example, <code>commercetools.categories.request</code> refers to performing requests via HTTPs to commercetools Composable Commerce for Categories and <code>commercetools.categories.response</code> refers to the response for Categories. </p>

 <p>The logger makes use of different log levels, so for example <code>commercetools.categories.response</code> logs on debug level the http response from the platform (abbreviated example):</p>

 <pre><code>
 [OkHttp https://api.europe-west1.gcp.commercetools.com/...] DEBUG commercetools.categories.response - io.vrap.rmf.base.client.ApiHttpResponse@33e37acd[statusCode=200,headers=...,textInterpretedBody={"limit":20,"offset":0,"count":4,"total":4,"results":[{"id":"ca7f64dc-ab41-4e7f-b65b-bfc25bf01111","version":1,"createdAt":"2021-01-06T09:21:55.445Z","lastModifiedAt":"2021-01-06T09:21:55.445Z","key":"random-key-15aab6ee-9a48-4fdc-a8c3-8ff9ff390d60","name":{"key-6bc3cc62-1995-43f4":"value-random-string-c3ff7f1a-6371-4c0c-a3b9-5060eca08b8a"},"slug":{"key-6bc3cc62-1995-43f4":"value-random-string-c3ff7f1a-6371-4c0c-a3b9-5060eca08b8a"},"description":{"key-6bc3cc62-1995-43f4":"value-random-string-c3ff7f1a-6371-4c0c-a3b9-5060eca08b8a"},"ancestors":[],"orderHint":"random-string-a99e6941-3225-4766-923a-4a654652532f","externalId":"random-id-100b3851-29b4-47c1-aef3-860b4cd28f54"}]}]
 </code></pre>

 <p><code>commercetools.categories.response</code> logs on trace level additional the formatted http response from the API (abbreviated example):</p>

 <pre><code>
 [OkHttp https://api.europe-west1.gcp.commercetools.com/...] TRACE commercetools.categories.response - 200
 {
   "limit" : 20,
   "offset" : 0,
   "count" : 4,
   "total" : 4,
   "results" : [ {
     "id" : "bcb15128-b69e-47b6-81c4-1ea5f9a63b83",
     "version" : 1,
     "lastMessageSequenceNumber" : 1,
     "createdAt" : "2021-01-06T09:21:50.485Z",
     "lastModifiedAt" : "2021-01-06T09:21:50.485Z",
     "createdBy" : {
       "clientId" : "h-QvaF3NpsjPBWeXa6TUOnq0",
       "isPlatformClient" : false
     },
     "key" : "random-key-f45535f5-1111-4bfb-98ac-164234ac2c73",
     "name" : {
       "key-b7d87008-9526-47b3-8b80" : "value-random-string-baf1a1ae-3726-4573-bec5-2c53c7d1114a"
     },
     "slug" : {
       "key-b7d87008-9526-47b3-8b80" : "value-random-string-baf1a1ae-3726-4573-bec5-2c53c7d1114a"
     },
     "description" : {
       "key-b7d87008-9526-47b3-8b80" : "value-random-string-baf1a1ae-3726-4573-bec5-2c53c7d1114a"
     },
     "ancestors" : [ ],
     "orderHint" : "random-string-6b88f299-d4ca-491a-9d7c-3463e718c8d2",
     "externalId" : "random-id-b98a5ab4-5413-40b3-8119-eb5ac2b5afbb",
     "metaTitle" : {
       "key-b7d87008-9526-47b3-8b80" : "value-random-string-baf1a1ae-3726-4573-bec5-2c53c7d1114a"
     },
     "metaKeywords" : {
       "key-b7d87008-9526-47b3-8b80" : "value-random-string-baf1a1ae-3726-4573-bec5-2c53c7d1114a"
     },
     "metaDescription" : {
       "key-b7d87008-9526-47b3-8b80" : "value-random-string-baf1a1ae-3726-4573-bec5-2c53c7d1114a"
     }
   }, {
   ...
   } ]
 }
 </code></pre>

 <p><code>commercetools.products.responses.queries</code> logs only HTTP GET requests and <code>commercetools.products.responses.commands</code> logs only HTTP POST/DELETE requests.</p>

 <pre><code>
 [pool-1-thread-1] DEBUG commercetools.products.request.commands - io.vrap.rmf.base.client.ApiHttpRequest@1d2c6948[method=POST,uri="https://api.europe-west1.gcp.commercetools.com/test-php-dev-integration-1/products",headers=[...],textInterpretedBody={"productType":{"id":"cda39953-23af-4e85-abb0-5b89517ec5f2","typeId":"product-type"},"name":{"random-string-b66de021-d2fa-4262-8837-94a6992a8cdc":"random-string-da28a010-e66b-49d4-a18b-f1bfc145d2f6"},...}]
 [pool-1-thread-1] DEBUG commercetools.products.request.queries - io.vrap.rmf.base.client.ApiHttpRequest@53667fdb[method=GET,uri="https://api.europe-west1.gcp.commercetools.com/test-php-dev-integration-1/products/ef745227-b115-4132-ba2c-4e46db80df79",headers=[...],textInterpretedBody=empty body]
 </code></pre>

 <h2 id=mdc_usage>Usage of Mapped Diagnostic Context</h2>

 <p>The SDK uses <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link"><code>CompletableFutures</code></a> extensively and the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link"><code>ExecutorService</code></a> typically has a thread pool
 to execute the futures. This could lead to the fact that the future is executed on different threads. In case the <code>MDC</code> is used by the application the context
 could get lost while executing the futures. As the CompletableFutures don't allow attaching a Context you have to make them and the ExecutorService
 context aware so that they will restore the MDC before executing the future tasks.</p>

 <p>The SDK additionally supports the attachment of a <a href="../../../../io/vrap/rmf/base/client/Context.html" title="interface in io.vrap.rmf.base.client"><code>Context</code></a> to a client <a href="../../../../io/vrap/rmf/base/client/ContextApiHttpClient.html" title="interface in io.vrap.rmf.base.client"><code>ContextApiHttpClient</code></a>,
 the <a href="../../../../io/vrap/rmf/base/client/ApiHttpRequest.html" title="class in io.vrap.rmf.base.client"><code>ApiHttpRequest</code></a> and the <a href="../../../../io/vrap/rmf/base/client/ApiHttpResponse.html" title="class in io.vrap.rmf.base.client"><code>ApiHttpResponse</code></a> by implementing the
 <a href="../../../../io/vrap/rmf/base/client/ContextAware.html" title="interface in io.vrap.rmf.base.client"><code>ContextAware</code></a> interface</p>

 <p>The <a href="../../api/client/ProjectApiRoot.html" title="class in com.commercetools.api.client"><code>ProjectApiRoot</code></a> also allows to add a <a href="../../../../io/vrap/rmf/base/client/Context.html" title="interface in io.vrap.rmf.base.client"><code>Context</code></a> to it. This is useful
 to create a context aware root from a global instance when needed.</p>

 <div id="example-ExamplesTest-mdcProjectApiRoot--%s" class=code-example><pre><code class='java'>ProjectApiRoot globalRoot = ProjectApiRoot.of("test");
ProjectApiRoot apiRoot = ProjectApiRoot.withContext(globalRoot, new MDCContext());
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/internal-docs/src/test/java/example/ExamplesTest.java" target="_blank">test code</a>.</pre></div>

 <p>The above example creates a <a href="../../../../io/vrap/rmf/base/client/MDCContext.html" title="class in io.vrap.rmf.base.client"><code>MDCContext</code></a> and take a copy of the MDC. The ApiHttpClient will be wrapped in a ContextApiHttpClient
 and set the context to all requests and responses executed.</p>

 <p>The <a href="../../../../io/vrap/rmf/base/client/http/InternalLoggerMiddleware.html" title="interface in io.vrap.rmf.base.client.http"><code>InternalLoggerMiddleware</code></a> will restore the MDC before logging and clean up afterwards to avoid
 pollution of threads with unrelated context data. The same applies for the <a href="../../api/client/ConcurrentModificationMiddleware.html" title="interface in com.commercetools.api.client"><code>ConcurrentModificationMiddleware</code></a></p>

 <p>The usage of the <a href="../../../../io/vrap/rmf/base/client/Context.html" title="interface in io.vrap.rmf.base.client"><code>Context</code></a> object in the SDK allows further extensions to transport request related context data e.g.
 for telemetry purposes.</p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><span class="member-name-link"><a href="#%3Cinit%3E()">Logging</a></span>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>Logging</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../src-html/com/commercetools/docs/meta/Logging.html#line.144">Logging</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><span id="custom-javascripts"></span><script src="../../../../resources/javascripts/main.js"></script><link rel="stylesheet" href="../../../../resources/stylesheets/main.css"></small></p>
</footer>
</div>
</div>
</body>
</html>
