<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ProductAttributeDocumentation (commercetools Java SDK)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.commercetools.docs.meta, class: ProductAttributeDocumentation">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.commercetools.docs.meta</a></div>
<h1 title="Class ProductAttributeDocumentation" class="title">Class ProductAttributeDocumentation</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.commercetools.docs.meta.ProductAttributeDocumentation</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">ProductAttributeDocumentation</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block"><b>Table of content</b><ul><li><a href="#intro">Introduction</a></li><ul><li><a href="#product-type-creation">ProductType Creation</a></li><li><a href="#product-creation">Product Creation</a></li><li><a href="#attribute-access-without-product-type">Reading Attributes</a></li><li><a href="#attribute-update">Update attribute values of a product</a></li><li><a href="#attributes-in-order-import">Create attributes for importing orders</a></li></ul></ul>
 <h2 id="intro">Introduction</h2>
 <h3 id="product-type-creation">ProductType Creation</h3>
 <p>A <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a> is like a schema that defines how the product attributes are structured.</p>
 <p><a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>s contain a list of <a href="../../api/models/product_type/AttributeDefinition.html" title="interface in com.commercetools.api.models.product_type"><code>AttributeDefinition</code></a>s which corresponds to the name and type of each attribute, along with some additional information".
 Each name/type pair must be unique across a Project, so if you create an attribute "foo" of type String, you cannot create
 another <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a> where "foo" has another type (e.g. <a href="../../api/models/common/LocalizedString.html" title="interface in com.commercetools.api.models.common"><code>LocalizedString</code></a>). If you do it anyway you get an error message like:</p>

<pre>"The attribute with name 'foo' has a different type on product type 'exampleproducttype'."</pre>

 <p>In this scenario we provide two <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>s <strong>book</strong> and <strong>tshirt</strong>.</p>


 <p>The book product type contains the following attributes:</p>
 <ul>
    <li><code>isbn</code> as <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a>, International Standard Book Number</li>
 </ul>

 <p>The tshirt product type contains the following attributes:</p>

 <ul>
    <li><code>color</code> as <a href="../../api/models/product_type/AttributeLocalizedEnumValue.html" title="interface in com.commercetools.api.models.product_type"><code>AttributeLocalizedEnumValue</code></a> with the colors green and red and their translations in German and English</li>
    <li><code>size</code> as <a href="../../api/models/product_type/AttributePlainEnumValue.html" title="interface in com.commercetools.api.models.product_type"><code>AttributePlainEnumValue</code></a> with S, M and X</li>
    <li><code>laundrySymbols</code> as set of <a href="../../api/models/product_type/AttributeLocalizedEnumValue.html" title="interface in com.commercetools.api.models.product_type"><code>AttributeLocalizedEnumValue</code></a> with temperature and tumble drying</li>
    <li><code>matchingProducts</code> as set of <a href="../../ml/models/common/ProductReference.html" title="interface in com.commercetools.ml.models.common"><code>ProductReference</code></a>s, which can point to products that are similar to the current product</li>
    <li><code>rrp</code> as <a href="../../api/models/common/Money.html" title="interface in com.commercetools.api.models.common"><code>Money</code></a> containing the recommended retail price</li>
    <li><code>availableSince</code> as <a href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link"><code>LocalDateTime</code></a> which contains the date since when the product is available for the customer in the shop</li>
 </ul>



 <p>All available attribute types you can find here: <a href="../../api/models/product_type/AttributeType.html" title="interface in com.commercetools.api.models.product_type"><code>AttributeType</code></a> in "All Known Implementing Classes".</p>

<p>The code for the creation of the book <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>:</p>
 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-createBookProductType--%s" class=code-example><pre><code class='java'>final AttributeDefinitionDraft isbn = AttributeDefinitionDraft.builder()
        .type(AttributeTextType.of())
        .name(ISBN_ATTR_NAME)
        .label(LocalizedString.ofEnglish("ISBN"))
        .isRequired(false)
        .build();

final ProductType productType = CommercetoolsTestUtils.getProjectApiRoot()
        .productTypes()
        .create(b -&gt; b.key(CommercetoolsTestUtils.randomKey())
                .name(BOOK_PRODUCT_TYPE_NAME)
                .description("books")
                .plusAttributes(isbn))
        .executeBlocking()
        .getBody();
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

<p>The code for the creation of the tshirt <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>:</p>
 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-createProductType--%s" class=code-example><pre><code class='java'>final AttributeLocalizedEnumValue green = AttributeLocalizedEnumValue.builder()
        .key("green")
        .label(LocalizedString.ofEnglish("green").plus(GERMAN, "gr√ºn"))
        .build();
final AttributeLocalizedEnumValue red = AttributeLocalizedEnumValue.builder()
        .key("red")
        .label(LocalizedString.of(ENGLISH, "red").plus(GERMAN, "rot"))
        .build();
final AttributeDefinitionDraft color = AttributeDefinitionDraft.builder()
        .name(COLOR_ATTR_NAME)
        .label(LocalizedString.ofEnglish("color"))
        .type(AttributeLocalizedEnumType.builder().plusValues(red, green).build())
        .isRequired(true)
        .build();

final AttributePlainEnumValue s = AttributePlainEnumValue.builder().key("S").label("S").build();
final AttributePlainEnumValue m = AttributePlainEnumValue.builder().key("M").label("M").build();
final AttributePlainEnumValue x = AttributePlainEnumValue.builder().key("X").label("X").build();
final AttributeDefinitionDraft size = AttributeDefinitionDraft.builder()
        .name(SIZE_ATTR_NAME)
        .label(LocalizedString.ofEnglish("size"))
        .type(AttributeEnumType.builder().plusValues(s, m, x).build())
        .isRequired(true)
        .build();

final AttributeLocalizedEnumValue cold = AttributeLocalizedEnumValue.builder()
        .key("cold")
        .label(LocalizedString.of(ENGLISH, "Wash at or below 30¬∞C ").plus(GERMAN, "30¬∞C"))
        .build();
final AttributeLocalizedEnumValue hot = AttributeLocalizedEnumValue.builder()
        .key("hot")
        .label(LocalizedString.of(ENGLISH, "Wash at or below 60¬∞C ").plus(GERMAN, "60¬∞C"))
        .build();
final AttributeLocalizedEnumValue tumbleDrying = AttributeLocalizedEnumValue.builder()
        .key("tumbleDrying")
        .label(LocalizedString.of(ENGLISH, "tumble drying").plus(GERMAN, "Trommeltrocknen"))
        .build();
final AttributeLocalizedEnumValue noTumbleDrying = AttributeLocalizedEnumValue.builder()
        .key("noTumbleDrying")
        .label(
            LocalizedString.of(ENGLISH, "no tumble drying").plus(GERMAN, "Nicht im Trommeltrockner trocknen"))
        .build();
final AttributeSetType laundryLabelType = AttributeSetType.builder()
        .elementType(
            AttributeLocalizedEnumType.builder().plusValues(cold, hot, tumbleDrying, noTumbleDrying).build())
        .build();
final AttributeDefinitionDraft laundrySymbols = AttributeDefinitionDraft.builder()
        .type(laundryLabelType)
        .name(LAUNDRY_SYMBOLS_ATTR_NAME)
        .label(LocalizedString.ofEnglish("washing labels"))
        .isRequired(false)
        .build();

final AttributeDefinitionDraft matchingProducts = AttributeDefinitionDraft.builder()
        .name(MATCHING_PRODUCTS_ATTR_NAME)
        .label(LocalizedString.ofEnglish("matching products"))
        .type(AttributeSetType.builder()
                .elementType(
                    AttributeReferenceType.builder().referenceTypeId(AttributeReferenceTypeId.PRODUCT).build())
                .build())
        .isRequired(false)
        .build();

final AttributeDefinitionDraft rrp = AttributeDefinitionDraft.builder()
        .name(RRP_ATTR_NAME)
        .label(LocalizedString.ofEnglish("recommended retail price"))
        .type(AttributeMoneyType.of())
        .isRequired(false)
        .build();

final AttributeDefinitionDraft availableSince = AttributeDefinitionDraft.builder()
        .name(AVAILABLE_SINCE_ATTR_NAME)
        .label(LocalizedString.ofEnglish("available since"))
        .type(AttributeDateType.of())
        .isRequired(false)
        .build();

final List&lt;AttributeDefinitionDraft&gt; attributes = asList(color, size, laundrySymbols, matchingProducts, rrp,
    availableSince);
final ProductTypeDraft productTypeDraft = ProductTypeDraft.builder()
        .key(CommercetoolsTestUtils.randomKey())
        .name(PRODUCT_TYPE_NAME)
        .description("a 'T' shaped cloth")
        .attributes(attributes)
        .build();
final ProductType productType = CommercetoolsTestUtils.getProjectApiRoot()
        .productTypes()
        .post(productTypeDraft)
        .executeBlocking()
        .getBody();
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>



 <p><a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>s have a key (String)
 which can be used as key to logically identify <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>s. The key has an unique constraint.

 <h3 id="product-creation">Product Creation</h3>

 <p>To create a product you need to reference the product type. Since the <a href="../../api/models/product_type/ProductType.html" title="interface in com.commercetools.api.models.product_type"><code>ProductType</code></a>
 ID of the development system will not be the ID of the production system it is necessary to find the product type by name:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-fetchProductTypeByName--%s" class=code-example><pre><code class='java'>final Optional&lt;ProductType&gt; productTypeOptional = CommercetoolsTestUtils.getProjectApiRoot()
        .productTypes()
        .get()
        .addQuery(p -&gt; p.name().is(PRODUCT_TYPE_NAME))
        .executeBlocking()
        .getBody()
        .head();
final ProductType productType = productTypeOptional
        .orElseThrow(() -&gt; new RuntimeException("product type " + PRODUCT_TYPE_NAME + " is not present."));
//end example parsing here
return productType;
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 The simplest way of adding attributes to a <a href="../../api/models/product/ProductVariant.html" title="interface in com.commercetools.api.models.product"><code>ProductVariant</code></a> is to use
 <a href="../../api/models/product/ProductVariantDraftBuilder.html#plusAttributes(com.commercetools.api.models.product.Attribute...)"><code>ProductVariantDraftBuilder.plusAttributes(Attribute...)</code></a> which enables you to directly
 put the value of the attribute to the draft. But it cannot check if you put the right objects and types in it.

 <p>A book example:</p>
 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-createBookProduct--%s" class=code-example><pre><code class='java'>final ProductType productType = CommercetoolsTestUtils.getProjectApiRoot()
        .productTypes()
        .get()
        .withQuery(query -&gt; query.name().is(BOOK_PRODUCT_TYPE_NAME))
        .executeBlocking()
        .getBody()
        .head()
        .get();
final ProductVariantDraft masterVariantDraft = ProductVariantDraft.builder()
        .plusAttributes(b -&gt; b.name(ISBN_ATTR_NAME).value("978-3-86680-192-9"))
        .build();
final ProductDraft draft = ProductDraft.builder()
        .productType(productType.toResourceIdentifier())
        .name(LocalizedString.ofEnglish("a book"))
        .slug(randomSlug())
        .masterVariant(masterVariantDraft)
        .build();

final Product product = CommercetoolsTestUtils.getProjectApiRoot()
        .products()
        .create(draft)
        .executeBlocking()
        .getBody();

final ProductVariant masterVariant = product.getMasterData().getStaged().getMasterVariant();
assertThat(masterVariant.findAttribute(ISBN_ATTR_NAME).get().getValue()).isEqualTo("978-3-86680-192-9");
return product;
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>A tshirt example:</p>
 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-createProduct--%s" class=code-example><pre><code class='java'>final ProductType productType = fetchProductTypeByName();
final ProductReference similarProductReference = ProductFixtures
        .referenceableProduct(CommercetoolsTestUtils.getProjectApiRoot())
        .toReference();
final ProductVariantDraft masterVariantDraft = ProductVariantDraft.builder()
        .plusAttributes(b -&gt; b.name(COLOR_ATTR_NAME).value("green")) //special case: any enums are set with key (String)
        .plusAttributes(b -&gt; b.name(SIZE_ATTR_NAME).value("S"))//special case: any enums are set with key (String)
        .plusAttributes(b -&gt; b.name(LAUNDRY_SYMBOLS_ATTR_NAME).value(asSet("cold", "tumbleDrying")))//special case: java.util.Set of any enums is set with java.util.Set of keys (String)
        .plusAttributes(b -&gt; b.name(MATCHING_PRODUCTS_ATTR_NAME).value(asSet(similarProductReference)))
        .plusAttributes(b -&gt; b.name(RRP_ATTR_NAME).value(Money.builder().centAmount(300L).currencyCode("EUR")))
        .plusAttributes(b -&gt; b.name(AVAILABLE_SINCE_ATTR_NAME).value(LocalDate.of(2015, 2, 2)))
        .build();
final ProductDraft draft = ProductDraft.builder()
        .productType(productType.toResourceIdentifier())
        .name(LocalizedString.ofEnglish("basic shirt"))
        .slug(randomSlug())
        .masterVariant(masterVariantDraft)
        .build();

final Product product = CommercetoolsTestUtils.getProjectApiRoot()
        .products()
        .create(draft)
        .executeBlocking()
        .getBody();

final ProductVariant masterVariant = product.getMasterData().getStaged().getMasterVariant();
assertThat(masterVariant.findAttribute(COLOR_ATTR_NAME).get().getValue())
        .overridingErrorMessage("on the get side, the while enum is delivered")
        .isEqualTo(AttributeLocalizedEnumValue.builder()
                .key("green")
                .label(LocalizedString.of(ENGLISH, "green").plus(GERMAN, "gr√ºn"))
                .build());
assertThat(masterVariant.findAttribute(SIZE_ATTR_NAME).get().getValue())
        .isEqualTo(AttributePlainEnumValue.builder().key("S").label("S").build());
final AttributeLocalizedEnumValue cold = AttributeLocalizedEnumValue.builder()
        .key("cold")
        .label(LocalizedString.of(ENGLISH, "Wash at or below 30¬∞C ").plus(GERMAN, "30¬∞C"))
        .build();
final AttributeLocalizedEnumValue tumbleDrying = AttributeLocalizedEnumValue.builder()
        .key("tumbleDrying")
        .label(LocalizedString.of(ENGLISH, "tumble drying").plus(GERMAN, "Trommeltrocknen"))
        .build();
assertThat(masterVariant.findAttribute(LAUNDRY_SYMBOLS_ATTR_NAME).get().getValue())
        .isEqualTo(asList(cold, tumbleDrying));
assertThat(masterVariant.findAttribute(MATCHING_PRODUCTS_ATTR_NAME).get().getValue())
        .isEqualTo(asList(similarProductReference));
assertThat(masterVariant.findAttribute(RRP_ATTR_NAME).get().getValue())
        .isEqualTo(CentPrecisionMoney.builder().currencyCode("EUR").centAmount(300L).fractionDigits(2).build());
assertThat(masterVariant.findAttribute(AVAILABLE_SINCE_ATTR_NAME).get().getValue())
        .isEqualTo(LocalDate.of(2015, 2, 2));

return product;
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 A wrong value for a field or an invalid type will cause an <a href="../../api/client/error/ErrorResponseException.html" title="interface in com.commercetools.api.client.error"><code>ErrorResponseException</code></a>
 with an error code of <a href="../../api/models/error/InvalidFieldError.html#INVALID_FIELD">"InvalidField"</a>.

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-invalidTypeCausesException--%s" class=code-example><pre><code class='java'>final ProductType productType = fetchProductTypeByName();
final ProductVariantDraft masterVariantDraft = ProductVariantDraft.builder()
        .plusAttributes(b -&gt; b.name(COLOR_ATTR_NAME).value(1)) //1 is of illegal type and of illegal key
        .build();
final ProductDraft draft = ProductDraft.builder()
        .productType(productType.toResourceIdentifier())
        .name(LocalizedString.ofEnglish("basic shirt"))
        .slug(randomSlug())
        .masterVariant(masterVariantDraft)
        .build();
assertThatThrownBy(() -&gt; CommercetoolsTestUtils.getProjectApiRoot().products().create(draft).executeBlocking())
        .isInstanceOf(ErrorResponseException.class)
        .matches(e -&gt; ((ErrorResponseException) e).hasErrorCode(InvalidFieldError.INVALID_FIELD));
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 As alternative you could declare your attributes at the same place and use these to read and write
 attribute values:

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-productCreationWithGetterSetter--%s" class=code-example><pre><code class='java'>final AttributeLocalizedEnumValue cold = AttributeLocalizedEnumValue.builder()
        .key("cold")
        .label(LocalizedString.of(ENGLISH, "Wash at or below 30¬∞C ").plus(GERMAN, "30¬∞C"))
        .build();
final AttributeLocalizedEnumValue tumbleDrying = AttributeLocalizedEnumValue.builder()
        .key("tumbleDrying")
        .label(LocalizedString.of(ENGLISH, "tumble drying").plus(GERMAN, "Trommeltrocknen"))
        .build();
final ProductReference productReference = ProductFixtures
        .referenceableProduct(CommercetoolsTestUtils.getProjectApiRoot())
        .toReference();
final ProductType productType = fetchProductTypeByName();
final ProductVariantDraft masterVariantDraft = ProductVariantDraft.builder()
        .plusAttributes(builder -&gt; builder.name(COLOR_ATTR_NAME).value("green"))
        .plusAttributes(builder -&gt; builder.name(SIZE_ATTR_NAME)
                .value(AttributePlainEnumValue.builder().key("S").label("S").build()))
        .plusAttributes(builder -&gt; builder.name(LAUNDRY_SYMBOLS_ATTR_NAME).value(asSet("cold", "tumbleDrying")))
        .plusAttributes(builder -&gt; builder.name(MATCHING_PRODUCTS_ATTR_NAME).value(asSet(productReference)))
        .plusAttributes(builder -&gt; builder.name(RRP_ATTR_NAME)
                .value(Money.builder().centAmount(300L).currencyCode("EUR").build()))
        .plusAttributes(builder -&gt; builder.name(AVAILABLE_SINCE_ATTR_NAME).value(LocalDate.of(2015, 2, 2)))
        .build();
final ProductDraft draft = ProductDraft.builder()
        .productType(productType.toResourceIdentifier())
        .name(LocalizedString.ofEnglish("basic shirt"))
        .slug(randomSlug())
        .masterVariant(masterVariantDraft)
        .build();

final Product product = CommercetoolsTestUtils.getProjectApiRoot()
        .products()
        .create(draft)
        .executeBlocking()
        .getBody();

final ProductVariant masterVariant = product.getMasterData().getStaged().getMasterVariant();
assertThat(masterVariant.getAttributeByName(COLOR_ATTR_NAME).asLocalizedEnum())
        .isEqualTo(AttributeLocalizedEnumValue.builder()
                .key("green")
                .label(LocalizedString.of(ENGLISH, "green").plus(GERMAN, "gr√ºn"))
                .build());
assertThat(masterVariant.getAttributeByName(SIZE_ATTR_NAME).asEnum())
        .isEqualTo(AttributePlainEnumValue.builder().key("S").label("S").build());
assertThat(masterVariant.getAttributeByName(LAUNDRY_SYMBOLS_ATTR_NAME).asSetLocalizedEnum())
        .isEqualTo(asList(cold, tumbleDrying));
assertThat(masterVariant.getAttributeByName(MATCHING_PRODUCTS_ATTR_NAME).asSetReference())
        .isEqualTo(singletonList(productReference));
assertThat(masterVariant.getAttributeByName(RRP_ATTR_NAME).asMoney())
        .isEqualTo(CentPrecisionMoney.builder().centAmount(300L).currencyCode("EUR").fractionDigits(2).build());
assertThat(masterVariant.getAttributeByName(AVAILABLE_SINCE_ATTR_NAME).asDate())
        .isEqualTo(LocalDate.of(2015, 2, 2));
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>


 <h3 id="attribute-access-without-product-type">Reading Attributes</h3>

 <p>The simplest way to get the value of the attribute is to use <code>getValue()</code> methods of <a href="../../api/models/product/Attribute.html" title="interface in com.commercetools.api.models.product"><code>Attribute</code></a>, like <a href="../../api/models/product/Attribute.html#getValue()"><code>Attribute.getValue()</code></a>:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-readAttributeGetValueAs--%s" class=code-example><pre><code class='java'>final ProductVariant masterVariant = createProduct().getMasterData().getStaged().getMasterVariant();

final String attributeValue = masterVariant.findAttribute(SIZE_ATTR_NAME, AttributeAccessor::asEnum)
        .map(AttributePlainEnumValue::getLabel)
        .orElse("not found");
assertThat(attributeValue).isEqualTo("S");
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>If you use a wrong conversion for the attribute, like you have a <a href="https://commercetools.github.io/commercetools-jvm-sdk/apidocs/io/sphere/sdk/models/EnumValue.html" title="class or interface in io.sphere.sdk.models" class="external-link"><code>EnumValue</code></a> but extract it as boolean then you get a <a href="../../../../io/vrap/rmf/base/client/utils/json/JsonException.html" title="class in io.vrap.rmf.base.client.utils.json"><code>JsonException</code></a>:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-readAttributeGetValueAsWithWrongType--%s" class=code-example><pre><code class='java'>final ProductVariant masterVariant = createProduct().getMasterData().getStaged().getMasterVariant();

final Throwable throwable = catchThrowable(
    () -&gt; masterVariant.findAttribute(SIZE_ATTR_NAME, AttributeAccessor::asBoolean).orElse(true));
assertThat(throwable).isInstanceOf(JsonException.class);
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>An alternative way to get a value out of an attribute is to use an instance of <a href="../../api/models/product/AttributesAccessor.html" title="class in com.commercetools.api.models.product"><code>AttributesAccessor</code></a>
 which keeps the type info to deserialize the attribute.</p>

 <p>You can reuse the <a href="https://commercetools.github.io/commercetools-jvm-sdk/apidocs/io/sphere/sdk/products/attributes/NamedAttributeAccess.html" title="class or interface in io.sphere.sdk.products.attributes" class="external-link"><code>NamedAttributeAccess</code></a> declaration if you want to:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-readAttributeWithoutProductTypeWithNamedAccess--%s" class=code-example><pre><code class='java'>final ProductVariant masterVariant = createProduct().getMasterData().getStaged().getMasterVariant();

final Optional&lt;AttributePlainEnumValue&gt; attributeOption = masterVariant.findAttribute(SIZE_ATTR_NAME,
    AttributeAccessor::asEnum);
assertThat(attributeOption).contains(AttributePlainEnumValue.builder().key("S").label("S").build());
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>Or you can access it on the fly:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-readAttributeWithoutProductTypeWithName--%s" class=code-example><pre><code class='java'>final ProductVariant masterVariant = createProduct().getMasterData().getStaged().getMasterVariant();

final Optional&lt;AttributePlainEnumValue&gt; attributeOption = masterVariant.findAttribute(SIZE_ATTR_NAME,
    AttributeAccessor::asEnum);
assertThat(attributeOption).contains(AttributePlainEnumValue.builder().key("S").label("S").build());
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>If the attribute is not present in the <a href="../../api/models/product/AttributeContainer.html" title="interface in com.commercetools.api.models.product"><code>AttributeContainer</code></a> then the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html" title="class or interface in java.util" class="external-link"><code>Optional</code></a> will be empty:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-notPresentAttributeRead--%s" class=code-example><pre><code class='java'>final ProductVariant masterVariant = createProduct().getMasterData().getStaged().getMasterVariant();

final Optional&lt;Boolean&gt; attributeOption = masterVariant.findAttribute("notpresent",
    AttributeAccessor::asBoolean);
assertThat(attributeOption).isEmpty();
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>If you provide a wrong type, the code will throw a <a href="../../../../io/vrap/rmf/base/client/utils/json/JsonException.html" title="class in io.vrap.rmf.base.client.utils.json"><code>JsonException</code></a>:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-readAttributeWithoutProductTypeWithNamedAccessWithWrongType--%s" class=code-example><pre><code class='java'>final ProductVariant masterVariant = createProduct().getMasterData().getStaged().getMasterVariant();

assertThatThrownBy(() -&gt; masterVariant.findAttribute(SIZE_ATTR_NAME, AttributeAccessor::asBoolean))
        .isInstanceOf(JsonException.class);
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <h3 id="attribute-update">Update attribute values of a product</h3>

 <p>Setting attribute values is like a a product creation:</p>


 <p>Example for books:</p>
 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-updateAttributesBooks--%s" class=code-example><pre><code class='java'>final Product product = createBookProduct();
final long masterVariantId = 1;

final Product updatedProduct = CommercetoolsTestUtils.getProjectApiRoot()
        .products()
        .update(product)
        .with(builder -&gt; builder.plus(actionBuilder -&gt; actionBuilder.setAttributeBuilder()
                .variantId(masterVariantId)
                .name(ISBN_ATTR_NAME)
                .value("978-3-86680-192-8")))
        .executeBlocking()
        .getBody();

final ProductVariant masterVariant = updatedProduct.getMasterData().getStaged().getMasterVariant();
assertThat(masterVariant.findAttribute(ISBN_ATTR_NAME).get().getValue()).isEqualTo("978-3-86680-192-8");
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <p>Example for tshirts:</p>
 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-updateAttributes--%s" class=code-example><pre><code class='java'>final Product product = createProduct();
final long masterVariantId = 1;
final Product updatedProduct = CommercetoolsTestUtils.getProjectApiRoot()
        .products()
        .update(product)
        .with(update -&gt; update
                .plus(builder -&gt; builder.setAttributeBuilder()
                        .variantId(masterVariantId)
                        .name(COLOR_ATTR_NAME)
                        .value("red"))
                .plus(builder -&gt; builder.setAttributeBuilder()
                        .variantId(masterVariantId)
                        .name(SIZE_ATTR_NAME)
                        .value("M"))
                .plus(builder -&gt; builder.setAttributeBuilder()
                        .variantId(masterVariantId)
                        .name(LAUNDRY_SYMBOLS_ATTR_NAME)
                        .value(asSet("cold")))
                .plus(builder -&gt; builder.setAttributeBuilder()
                        .variantId(masterVariantId)
                        .name(RRP_ATTR_NAME)
                        .value(Money.builder().currencyCode("EUR").centAmount(2000L))))
        .executeBlocking()
        .getBody();

final ProductVariant masterVariant = updatedProduct.getMasterData().getStaged().getMasterVariant();
assertThat(masterVariant.findAttribute(COLOR_ATTR_NAME, AttributeAccessor::asLocalizedEnum))
        .contains(AttributeLocalizedEnumValue.builder()
                .key("red")
                .label(LocalizedString.of(ENGLISH, "red").plus(GERMAN, "rot"))
                .build());
assertThat(masterVariant.findAttribute(SIZE_ATTR_NAME, AttributeAccessor::asEnum))
        .contains(AttributePlainEnumValue.builder().key("M").label("M").build());
final AttributeLocalizedEnumValue cold = AttributeLocalizedEnumValue.builder()
        .key("cold")
        .label(LocalizedString.of(ENGLISH, "Wash at or below 30¬∞C ").plus(GERMAN, "30¬∞C"))
        .build();
assertThat(masterVariant.findAttribute(LAUNDRY_SYMBOLS_ATTR_NAME, AttributeAccessor::asSetLocalizedEnum))
        .contains(singletonList(cold));
assertThat(masterVariant.findAttribute(RRP_ATTR_NAME, AttributeAccessor::asMoney))
        .contains(CentPrecisionMoney.builder().centAmount(2000L).currencyCode("EUR").fractionDigits(2).build());
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 A wrong value for a field or an invalid type (like flat value instead of set) will cause an <a href="https://commercetools.github.io/commercetools-jvm-sdk/apidocs/io/sphere/sdk/client/ErrorResponseException.html" title="class or interface in io.sphere.sdk.client" class="external-link"><code>ErrorResponseException</code></a>
 with an error code of <a href="../../api/models/error/InvalidFieldError.html#INVALID_FIELD">"InvalidField"</a>.

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-updateWithWrongType--%s" class=code-example><pre><code class='java'>final Product product = createProduct();
assertThatThrownBy(() -&gt; CommercetoolsTestUtils.getProjectApiRoot()
        .products()
        .update(product)
        .with(update -&gt; update.plus(builder -&gt; builder.setAttributeBuilder()
                .variantId(1L)
                .name(LAUNDRY_SYMBOLS_ATTR_NAME)
                .value("cold")))
        .executeBlocking()).isInstanceOf(ErrorResponseException.class)
                .matches(e -&gt; ((ErrorResponseException) e).hasErrorCode(InvalidFieldError.INVALID_FIELD));
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div>

 <h3 id="attributes-in-order-import">Create attributes for importing orders</h3>

 <p>Importing attribute values for orders works different from updating products.
 In orders you provide the full value for enum-like types instead of just the key as done for all other types.
 This makes it possible to create a new enum value on the fly. The other attributes behave as expected.</p>

 <p>Example:</p>

 <div id="commercetools-product-type-ProductTypeCreationDemoIntegrationTest-orderImportExample--%s" class=code-example><pre><code class='java'>final Product product = createProduct();
//yellow is not defined in the product type, but for order imports this works to add use it on the fly
final AttributeLocalizedEnumValue yellow = AttributeLocalizedEnumValue.builder()
        .key("yellow")
        .label(LocalizedString.of(ENGLISH, "yellow").plus(GERMAN, "gelb"))
        .build();
final ProductVariantImportDraft productVariantImportDraft = ProductVariantImportDraft.builder()
        .id(1L)
        .plusAttributes(builder -&gt; builder.name(COLOR_ATTR_NAME).value(yellow))
        .plusAttributes(builder -&gt; builder.name(RRP_ATTR_NAME).value(TestUtils.EURO_30))
        .build();
final LineItemImportDraft lineItemImportDraft = LineItemImportDraft.builder()
        .productId(product.getId())
        .variant(productVariantImportDraft)
        .quantity(1L)
        .price(p -&gt; p.value(TestUtils.EURO_20))
        .name(LocalizedString.ofEnglish("product name"))
        .build();
final OrderImportDraft orderImportDraft = OrderImportDraft.builder()
        .lineItems(lineItemImportDraft)
        .totalPrice(TestUtils.EURO_20)
        .orderState(OrderState.COMPLETE)
        .build();

final Order order = CommercetoolsTestUtils.getProjectApiRoot()
        .orders()
        .importOrder()
        .post(orderImportDraft)
        .executeBlocking()
        .getBody();

final ProductVariant productVariant = order.getLineItems().get(0).getVariant();
final Optional&lt;AttributeLocalizedEnumValue&gt; colorAttribute = productVariant.findAttribute(COLOR_ATTR_NAME,
    AttributeAccessor::asLocalizedEnum);
assertThat(colorAttribute).contains(yellow);
final Optional&lt;Money&gt; rrpAttribute = productVariant.findAttribute(RRP_ATTR_NAME, AttributeAccessor::asMoney);
assertThat(rrpAttribute).contains(TestUtils.EURO_30);
final Set&lt;String&gt; presentAttributes = productVariant.getAttributes()
        .stream()
        .map(Attribute::getName)
        .collect(toSet());
assertThat(presentAttributes).containsOnly(COLOR_ATTR_NAME, RRP_ATTR_NAME);
</code><p>See the <a href="https://github.com/commercetools/commercetools-sdk-java-v2/blob/master/commercetools/commercetools-sdk-java-api/src/integrationTest/java/commercetools/product_type/ProductTypeCreationDemoIntegrationTest.java" target="_blank">test code</a>.</pre></div></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><span id="custom-javascripts"></span><script src="../../../../resources/javascripts/main.js"></script><link rel="stylesheet" href="../../../../resources/stylesheets/main.css"></small></p>
</footer>
</div>
</div>
</body>
</html>
