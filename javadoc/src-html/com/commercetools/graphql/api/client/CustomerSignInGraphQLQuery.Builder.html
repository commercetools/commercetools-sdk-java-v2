<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: package: com.commercetools.graphql.api.client, class: CustomerSignInGraphQLQuery, class: Builder">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">package com.commercetools.graphql.api.client;</span>
<span class="source-line-no">002</span><span id="line-2"></span>
<span class="source-line-no">003</span><span id="line-3">import com.commercetools.graphql.api.types.CustomerSignInDraft;</span>
<span class="source-line-no">004</span><span id="line-4">import com.netflix.graphql.dgs.client.codegen.GraphQLQuery;</span>
<span class="source-line-no">005</span><span id="line-5">import java.lang.Override;</span>
<span class="source-line-no">006</span><span id="line-6">import java.lang.String;</span>
<span class="source-line-no">007</span><span id="line-7">import java.util.HashSet;</span>
<span class="source-line-no">008</span><span id="line-8">import java.util.Set;</span>
<span class="source-line-no">009</span><span id="line-9"></span>
<span class="source-line-no">010</span><span id="line-10">/**</span>
<span class="source-line-no">011</span><span id="line-11"> * Retrieves the authenticated customer (a customer that matches the given email/password pair).</span>
<span class="source-line-no">012</span><span id="line-12"> *</span>
<span class="source-line-no">013</span><span id="line-13"> * There may be carts and orders created before the sign in that should be assigned to the customer account. With the `anonymousCartId`, a single anonymous cart can be assigned. With the `anonymousId`, all orders and carts that have this `anonymousId` set will be assigned to the customer.</span>
<span class="source-line-no">014</span><span id="line-14"> * If both `anonymousCartId` and `anonymousId` are given, the anonymous cart must have the `anonymousId`.</span>
<span class="source-line-no">015</span><span id="line-15"> *</span>
<span class="source-line-no">016</span><span id="line-16"> * Additionally, there might also exist one or more active customer carts from an earlier session. On customer sign in there are several ways how to proceed with this cart and the cart referenced by the `anonymousCartId`.</span>
<span class="source-line-no">017</span><span id="line-17"> *</span>
<span class="source-line-no">018</span><span id="line-18"> * * If the customer does not have a cart yet, the anonymous cart becomes the customer's cart.</span>
<span class="source-line-no">019</span><span id="line-19"> * * If the customer already has one or more carts, the content of the anonymous cart will be copied to the customer's active cart that has been modified most recently.</span>
<span class="source-line-no">020</span><span id="line-20"> *</span>
<span class="source-line-no">021</span><span id="line-21"> *   In this case the `CartState` of the anonymous cart gets changed to `Merged` while the customer's cart remains the `Active` cart.</span>
<span class="source-line-no">022</span><span id="line-22"> *</span>
<span class="source-line-no">023</span><span id="line-23"> *   If a `LineItem` in the anonymous cart matches an existing line item, or a `CustomLineItem` matches an existing custom line item in the customer's cart, the maximum quantity of both line items is used as the new quantity.</span>
<span class="source-line-no">024</span><span id="line-24"> *</span>
<span class="source-line-no">025</span><span id="line-25"> *   `ItemShippingDetails` are copied from the item with the highest quantity.</span>
<span class="source-line-no">026</span><span id="line-26"> *</span>
<span class="source-line-no">027</span><span id="line-27"> *   If `itemShippingAddresses` are different in the two carts, the resulting cart contains the addresses of both the customer cart and the anonymous cart.</span>
<span class="source-line-no">028</span><span id="line-28"> *</span>
<span class="source-line-no">029</span><span id="line-29"> *   Note, that it is not possible to merge carts that differ in their currency (set during creation of the cart).</span>
<span class="source-line-no">030</span><span id="line-30"> *</span>
<span class="source-line-no">031</span><span id="line-31"> * If a cart is is returned as part of the `CustomerSignInResult`, it has been recalculated (it will have up-to-date prices, taxes and discounts, and invalid line items have been removed).</span>
<span class="source-line-no">032</span><span id="line-32"> */</span>
<span class="source-line-no">033</span><span id="line-33">public class CustomerSignInGraphQLQuery extends GraphQLQuery {</span>
<span class="source-line-no">034</span><span id="line-34">  public CustomerSignInGraphQLQuery(CustomerSignInDraft draft, String storeKey, String queryName,</span>
<span class="source-line-no">035</span><span id="line-35">      Set&lt;String&gt; fieldsSet) {</span>
<span class="source-line-no">036</span><span id="line-36">    super("mutation", queryName);</span>
<span class="source-line-no">037</span><span id="line-37">    if (draft != null || fieldsSet.contains("draft")) {</span>
<span class="source-line-no">038</span><span id="line-38">        getInput().put("draft", draft);</span>
<span class="source-line-no">039</span><span id="line-39">    }if (storeKey != null || fieldsSet.contains("storeKey")) {</span>
<span class="source-line-no">040</span><span id="line-40">        getInput().put("storeKey", storeKey);</span>
<span class="source-line-no">041</span><span id="line-41">    }</span>
<span class="source-line-no">042</span><span id="line-42">  }</span>
<span class="source-line-no">043</span><span id="line-43"></span>
<span class="source-line-no">044</span><span id="line-44">  public CustomerSignInGraphQLQuery() {</span>
<span class="source-line-no">045</span><span id="line-45">    super("mutation");</span>
<span class="source-line-no">046</span><span id="line-46">  }</span>
<span class="source-line-no">047</span><span id="line-47"></span>
<span class="source-line-no">048</span><span id="line-48">  @Override</span>
<span class="source-line-no">049</span><span id="line-49">  public String getOperationName() {</span>
<span class="source-line-no">050</span><span id="line-50">     return "customerSignIn";</span>
<span class="source-line-no">051</span><span id="line-51">                    </span>
<span class="source-line-no">052</span><span id="line-52">  }</span>
<span class="source-line-no">053</span><span id="line-53"></span>
<span class="source-line-no">054</span><span id="line-54">  public static Builder newRequest() {</span>
<span class="source-line-no">055</span><span id="line-55">    return new Builder();</span>
<span class="source-line-no">056</span><span id="line-56">  }</span>
<span class="source-line-no">057</span><span id="line-57"></span>
<span class="source-line-no">058</span><span id="line-58">  public static class Builder {</span>
<span class="source-line-no">059</span><span id="line-59">    private Set&lt;String&gt; fieldsSet = new HashSet&lt;&gt;();</span>
<span class="source-line-no">060</span><span id="line-60"></span>
<span class="source-line-no">061</span><span id="line-61">    private CustomerSignInDraft draft;</span>
<span class="source-line-no">062</span><span id="line-62"></span>
<span class="source-line-no">063</span><span id="line-63">    private String storeKey;</span>
<span class="source-line-no">064</span><span id="line-64"></span>
<span class="source-line-no">065</span><span id="line-65">    private String queryName;</span>
<span class="source-line-no">066</span><span id="line-66"></span>
<span class="source-line-no">067</span><span id="line-67">    public CustomerSignInGraphQLQuery build() {</span>
<span class="source-line-no">068</span><span id="line-68">      return new CustomerSignInGraphQLQuery(draft, storeKey, queryName, fieldsSet);</span>
<span class="source-line-no">069</span><span id="line-69">               </span>
<span class="source-line-no">070</span><span id="line-70">    }</span>
<span class="source-line-no">071</span><span id="line-71"></span>
<span class="source-line-no">072</span><span id="line-72">    public Builder draft(CustomerSignInDraft draft) {</span>
<span class="source-line-no">073</span><span id="line-73">      this.draft = draft;</span>
<span class="source-line-no">074</span><span id="line-74">      this.fieldsSet.add("draft");</span>
<span class="source-line-no">075</span><span id="line-75">      return this;</span>
<span class="source-line-no">076</span><span id="line-76">    }</span>
<span class="source-line-no">077</span><span id="line-77"></span>
<span class="source-line-no">078</span><span id="line-78">    /**</span>
<span class="source-line-no">079</span><span id="line-79">     * The mutation is only performed if the resource is part of the store. Can be used with store-specific OAuth permissions.</span>
<span class="source-line-no">080</span><span id="line-80">     */</span>
<span class="source-line-no">081</span><span id="line-81">    public Builder storeKey(String storeKey) {</span>
<span class="source-line-no">082</span><span id="line-82">      this.storeKey = storeKey;</span>
<span class="source-line-no">083</span><span id="line-83">      this.fieldsSet.add("storeKey");</span>
<span class="source-line-no">084</span><span id="line-84">      return this;</span>
<span class="source-line-no">085</span><span id="line-85">    }</span>
<span class="source-line-no">086</span><span id="line-86"></span>
<span class="source-line-no">087</span><span id="line-87">    public Builder queryName(String queryName) {</span>
<span class="source-line-no">088</span><span id="line-88">      this.queryName = queryName;</span>
<span class="source-line-no">089</span><span id="line-89">      return this;</span>
<span class="source-line-no">090</span><span id="line-90">    }</span>
<span class="source-line-no">091</span><span id="line-91">  }</span>
<span class="source-line-no">092</span><span id="line-92">}</span>




























































</pre>
</div>
</main>
</body>
</html>
